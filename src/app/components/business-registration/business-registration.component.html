<div class="registration-container">
  <div class="registration-wrapper">
    <!-- Left side with welcome text and progress steps -->
    <div class="left-section">
      <div class="welcome-text">
        <h2>{{ welcomeTitle }}</h2>
        <p>{{ welcomeDescription }}</p>
      </div>
      
      <app-progress-steps [currentStep]="currentStep"></app-progress-steps>
    </div>
    
    <!-- Right side with white content container -->
    <div class="right-section">
      <!-- Step tabs for mobile view -->
      <div class="step-tabs mobile-tabs">
        <div class="tab" [ngClass]="{'active': currentStep === 'business-type', 'completed': isStepCompleted('business-type')}" 
             [style.background-color]="currentStep === 'business-type' ? '#FFFFFF' : 'transparent'" 
             [style.color]="currentStep === 'business-type' ? '#3D3D3D' : '#FFFFFF'"
             [style.font-family]="currentStep === 'business-type' ? 'Figtree, sans-serif' : ''"
             [style.font-weight]="currentStep === 'business-type' ? '600' : ''">
          <div class="tab-bullet" 
               [style.background-color]="isStepCompleted('business-type') ? '#FFFFFF' : 
                                       (currentStep === 'business-type' ? '#FFFFFF' : 'transparent')"
               [style.border]="'1px solid #FFFFFF'">
            <img *ngIf="isStepCompleted('business-type')" src="assets/completed-icon.svg" alt="Completed" class="completed-icon">
          </div>
          <div class="tab-text">Business<br>Type</div>
        </div>
        <div class="tab" [ngClass]="{'active': currentStep === 'merchant-details', 'completed': isStepCompleted('merchant-details')}" 
             [style.background-color]="currentStep === 'merchant-details' ? '#FFFFFF' : 'transparent'" 
             [style.color]="currentStep === 'merchant-details' ? '#3D3D3D' : '#FFFFFF'"
             [style.font-family]="currentStep === 'merchant-details' ? 'Figtree, sans-serif' : ''"
             [style.font-weight]="currentStep === 'merchant-details' ? '600' : ''">
          <div class="tab-bullet" 
               [style.background-color]="isStepCompleted('merchant-details') ? '#FFFFFF' : 
                                       (currentStep === 'merchant-details' ? '#FFFFFF' : 'transparent')"
               [style.border]="'1px solid #FFFFFF'">
            <img *ngIf="isStepCompleted('merchant-details')" src="assets/completed-icon.svg" alt="Completed" class="completed-icon">
          </div>
          <div class="tab-text">Merchant<br>Details</div>
        </div>
        <div class="tab" [ngClass]="{'active': currentStep === 'business-address', 'completed': isStepCompleted('business-address')}" 
             [style.background-color]="currentStep === 'business-address' ? '#FFFFFF' : 'transparent'" 
             [style.color]="currentStep === 'business-address' ? '#3D3D3D' : '#FFFFFF'"
             [style.font-family]="currentStep === 'business-address' ? 'Figtree, sans-serif' : ''"
             [style.font-weight]="currentStep === 'business-address' ? '600' : ''">
          <div class="tab-bullet" 
               [style.background-color]="isStepCompleted('business-address') ? '#FFFFFF' : 
                                       (currentStep === 'business-address' ? '#FFFFFF' : 'transparent')"
               [style.border]="'1px solid #FFFFFF'">
            <img *ngIf="isStepCompleted('business-address')" src="assets/completed-icon.svg" alt="Completed" class="completed-icon">
          </div>
          <div class="tab-text">Business<br>Address</div>
        </div>
      </div>
      <div class="content-container">
      <!-- Progress bullet horizontal line above heading -->
      <div class="progress-bullet-line"></div>
      
      <!-- Business Type Selection Form -->
      <div class="form-container" *ngIf="currentStep === 'business-type'">
        <!-- Entity Type Selection Sub-step -->
        <div *ngIf="businessTypeSubStep === 'entity-type'">
          <div class="form-header">
            <h3>Your legal entity setup type</h3>
            <p>Select an option below that fits right for your legal entity.</p>
          </div>
          
          <div class="business-types-list">
            <div *ngFor="let type of businessTypes" 
                class="business-type-option" 
                [ngClass]="{'selected': type.selected}" 
                (click)="selectBusinessType(type.id)">
              <div class="business-type-content">
                <!-- No icons, just the business type details and radio button -->
                <div class="business-type-details">
                  <h4>{{ type.name }}</h4>
                  <p>{{ type.description }}</p>
                </div>
                <div class="option-radio">
                  <div class="radio-button" [ngClass]="{'checked': type.selected}"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Company Name Search Sub-step -->
        <div *ngIf="businessTypeSubStep === 'company-name'">
          <div class="form-header">
            <h3>Provide name of your Company</h3>
            <p>Search and select your registered company from the list below.</p>
          </div>
          
          <div class="company-search-container">
            <div class="search-input-container">
              <input type="text" 
                     [formControl]="searchControl" 
                     placeholder="Groo" 
                     (input)="searchCompany()" 
                     class="company-search-input">
              <button *ngIf="searchControl.value" 
                      class="clear-search-btn" 
                      (click)="clearSearch()">
                Ã—
              </button>
            </div>
            
            <div class="company-results" *ngIf="showResults || searchControl.value">
              <div *ngFor="let company of companyResults" 
                   class="company-result-item" 
                   (click)="selectCompany(company)">
                <div class="company-info">
                  <h4>{{ company.name }}</h4>
                  <p>{{ company.regNumber }} - {{ company.address }}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="button-group">
          <button class="btn btn-outline" (click)="cancel()">BACK</button>
          <button class="btn btn-primary" (click)="nextStep()">NEXT</button>
        </div>
      </div>
      
      <!-- Merchant Details Form -->
      <div class="form-container" *ngIf="currentStep === 'merchant-details'">
        <div class="form-header">
          <h3>Tell us a bit about yourself*</h3>
          <p>Please provide your details so that we can contact you if you need any support or follow-ups.</p>
        </div>
        
        <div class="merchant-details-form">
          <div class="form-row">
            <div class="form-group">
              <label for="firstName">First Name</label>
              <input type="text" id="firstName" [formControl]="firstNameControl" placeholder="Clinton" class="form-control">
            </div>
            
            <div class="form-group">
              <label for="lastName">Last Name</label>
              <input type="text" id="lastName" [formControl]="lastNameControl" placeholder="Foy" class="form-control">
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label for="phoneNumber">Phone number</label>
              <div class="phone-input-container">
                <div class="country-code">UK+44</div>
                <input type="tel" id="phoneNumber" [formControl]="phoneNumberControl" placeholder="7645 9837" class="form-control phone-input">              
              </div>
            </div>
            
            <div class="form-group">
              <label for="email">Email address</label>
              <input type="email" id="email" [formControl]="emailControl" placeholder="clinton@groov.com" class="form-control">
            </div>
          </div>
          
          <div class="form-row terms-row">
            <div class="form-group terms-group">
              <div class="terms-checkbox-container">
                <input type="checkbox" id="termsAgreed" [formControl]="termsAgreedControl" class="terms-checkbox">
                <label for="termsAgreed" class="terms-label">
                  I agree to the <a href="#" class="terms-link">Terms and Conditions</a> and <a href="#" class="terms-link">Privacy Policy</a>
                </label>
              </div>
            </div>
          </div>
        </div>
        
        <div class="button-group">
          <button class="btn btn-outline" (click)="cancel()">BACK</button>
          <button class="btn btn-primary" (click)="nextStep()">NEXT</button>
        </div>
      </div>
      
      <!-- Business Address Form -->
      <div class="form-container" *ngIf="currentStep === 'business-address'">
        <div class="form-header">
          <h3>Business Address</h3>
          <p>Please confirm your registered or business address</p>
        </div>
        
        <div class="business-address-form">
          <!-- Registered Address Display - Only shown when address is filled -->
          <div class="registered-address-container" *ngIf="hasRegisteredAddress">
            <div class="registered-address-box">
              <div class="address-icon">
                <img src="assets/briefcase-01.svg" alt="Business" class="building-icon">
              </div>
              <div class="registered-address-details">
                <h4>{{ registeredCompanyName }}</h4>
                <p>{{ registeredCompanyAddress }}</p>
              </div>
              <div class="edit-icon" (click)="editRegisteredAddress()">
                <img src="assets/edit-05.svg" alt="Edit" class="edit-address-icon">
              </div>
            </div>
          </div>
          
          <!-- Address Search and Form Fields - Only shown when in edit mode -->
          <div *ngIf="!hasRegisteredAddress">
            <!-- Address Search -->
            <div class="address-search-section">
              <label for="addressSearch" class="search-label">Search Address</label>
              <div class="search-input-container">
                <input type="text" 
                       id="addressSearch"
                       [formControl]="addressSearchControl" 
                       placeholder="Search by Post Code, Town/City, full address..." 
                       class="address-search-input">
                <div class="dropdown-icon">
                  <img src="assets/down-arrow.svg" alt="Dropdown" class="down-arrow-icon">
                </div>
              </div>
              
              <!-- Address Search Results Dropdown -->
              <div class="address-search-results" *ngIf="showAddressResults">
                <div class="address-result-item" *ngFor="let address of addressResults" (click)="selectAddress(address)">
                  {{ address }}
                </div>
              </div>
            </div>
            
            <!-- Address Form Fields -->
            <div class="address-form-fields">
              <div class="form-row">
                <div class="form-group">
                  <label for="addressLine1">Address Line 1</label>
                  <input type="text" id="addressLine1" [formControl]="addressLine1Control" placeholder="Enter full address" class="form-control">
                </div>
              </div>
              
              <div class="form-row">
                <div class="form-group">
                  <label for="addressLine2">Address Line 2 (Optional)</label>
                  <input type="text" id="addressLine2" [formControl]="addressLine2Control" placeholder="Enter full address" class="form-control">
                </div>
              </div>
              
              <div class="form-row">
                <div class="form-group">
                  <label for="townCity">Town/City</label>
                  <input type="text" id="townCity" [formControl]="townCityControl" placeholder="Enter town or city" class="form-control">
                </div>
              </div>
              
              <div class="form-row">
                <div class="form-group">
                  <label for="stateRegion">State/Region/Province*</label>
                  <input type="text" id="stateRegion" [formControl]="stateRegionControl" placeholder="Enter" class="form-control">
                </div>
              </div>
              
              <div class="form-row">
                <div class="form-group">
                  <label for="postCode">Post Code</label>
                  <input type="text" id="postCode" [formControl]="postCodeControl" placeholder="Enter post code" class="form-control">
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Navigation buttons - always visible regardless of edit mode -->
        <div class="button-group">
          <button class="btn btn-outline" (click)="cancel()">BACK</button>
          <button class="btn btn-primary" (click)="nextStep()">NEXT</button>
        </div>
      </div>
    </div>
    </div>
  </div>
</div>
